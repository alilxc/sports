<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="utf-8" />
		<title>大学生运动管理信息系统</title>
		<meta name="keywords" content="" />
		<meta name="description" content="" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link href="assets/css/bootstrap.min.css" rel="stylesheet" />
		<link rel="stylesheet" href="assets/css/font-awesome.min.css" />
		<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open+Sans:400,300" />
		<link rel="stylesheet" href="assets/css/ace.min.css" />
		<link rel="stylesheet" href="assets/css/ace-rtl.min.css" />
		<link rel="stylesheet" href="assets/css/ace-skins.min.css" />
		<script src="assets/js/ace-extra.min.js"></script>
        <script src="assets/js/myjs/my.js"></script>


    </head>

	<body>
		<!--头部 Begin-->
		<div class="navbar navbar-default" id="navbar">
			<script type="text/javascript">
				try {
					ace.settings.check('navbar', 'fixed')
				} catch(e) {}
			</script>

			<div class="navbar-container" id="navbar-container">
				<div class="navbar-header pull-left">
					<a href="#" class="navbar-brand">
						<small>
							<i class="icon-leaf"></i>
							大学生运动管理信息系统
						</small>
					</a>
				</div>

				<div class="navbar-header pull-right" role="navigation">
					<ul class="nav ace-nav">
						<li class="light-blue">
							<a data-toggle="dropdown" href="#" class="dropdown-toggle">
								<img class="nav-user-photo" src="assets/avatars/user.jpg" alt="Jason's Photo"/>
								<span class="user-info">
									<small>欢迎光临</small>
									<strong id="username"></strong>

								</span>

								<i class="icon-caret-down"></i>
							</a>

							<ul class="user-menu pull-right dropdown-menu dropdown-yellow dropdown-caret dropdown-close">
								<li>
									<div class="col-sm-offset-2 col-sm-10">
										<i class="icon-off"></i>
										<button type="button" onclick="logout()" class="btn btn-default">退出</button>
									</div>
								</li>
							</ul>
						</li>
					</ul>
					<!-- /.ace-nav -->
				</div>
				<!-- /.navbar-header -->
			</div>
			<!-- /.container -->
		</div>
		<!--头部 End-->

		<!--主体部分 Begin-->
		<div class="main-container" id="main-container">
			<script type="text/javascript">
				try {
					ace.settings.check('main-container', 'fixed')
				} catch(e) {}
			</script>

			<div class="main-container-inner">
				<a class="menu-toggler" id="menu-toggler" href="#">
					<span class="menu-text"></span>
				</a>

				<!--左侧导航 Begin-->
				<div class="sidebar" id="sidebar">
					<script type="text/javascript">
						try {
							ace.settings.check('sidebar', 'fixed')
						} catch(e) {}
					</script>

					<ul class="nav nav-list" id="navlist">
						<li class="active navshowa">
							<a href="index.html">
								<i class="icon-dashboard"></i>
								<span class="menu-text">首页</span>
							</a>
						</li>

						<li class="active navshowa1">
							<a href="project.html">
								<i class="icon-text-width"></i>
								<span class="menu-text">项目管理</span>
							</a>
						</li>

						<li class="active navshowa2">
							<a href="#" class="dropdown-toggle">
								<i class="icon-desktop"></i>
								<span class="menu-text">成绩查询</span>

								<b class="arrow icon-angle-down"></b>
							</a>

							<ul class="submenu">
								<li class="navshowa21">
									<a href="search_person.html">
										<i class="icon-double-angle-right"></i> 个人查询
									</a>
								</li>

								<li class="navshowa22">
									<a href="search_school.html">
										<i class="icon-double-angle-right"></i> 院系查询
									</a>
								</li>
							</ul>
						</li>

						<li class="active navshowa3">
							<a href="#" class="dropdown-toggle">
								<i class="icon-list"></i>
								<span class="menu-text">学生报名管理</span>

								<b class="arrow icon-angle-down"></b>
							</a>

							<ul class="submenu">
								<li class="navshowa31">
									<a href="enter.html">
										<i class="icon-double-angle-right"></i> 报名
									</a>
								</li>

								<li class="navshowa32">
									<a href="enter_msg.html">
										<i class="icon-double-angle-right"></i> 报名信息查询
									</a>
								</li>
							</ul>
						</li>

						<li class="active navshowa4">
							<a href="addscore.html" class="dropdown-toggle">
								<i class="icon-edit"></i>
								<span class="menu-text">成绩录入</span>
							</a>
						</li>

						<li class="active navshowa5">
							<a href="usermsg.html" class="dropdown-toggle">
								<i class="icon-apple"></i>
								<span class="menu-text">权限管理</span>
							</a>
						</li>
					</ul>
					<!-- /.nav-list -->
				</div>
				<!--左侧导航 End-->

				<!--右侧内容 Begin-->
				<div class="main-content">
					<!--面包屑导航 Begin-->
					<div class="breadcrumbs" id="breadcrumbs">
						<script type="text/javascript">
							try {
								ace.settings.check('breadcrumbs', 'fixed')
							} catch(e) {}
						</script>

						<ul class="breadcrumb">
							<li>
								<i class="icon-home home-icon"></i>
								<a href="index.html" class="active">首页</a>
							</li>
						</ul>
					</div>
					<!--面包屑导航 End-->

					<!--内容 Begin-->
					<div class="page-content">
						<!--项目选择 Begin-->
						<div class="row">
							<div class="col-xs-12" style="padding-top: 30px;">
								<!-- PAGE CONTENT BEGINS -->

								<!--输入框 Begin-->
								<div class="form-group">
									<form class="form-horizontal" role="form">

										<label class="col-sm-3 control-label no-padding-right">项目名称:</label>

										<div class="col-sm-5">
											<select id="projectid"  class="col-xs-10 col-sm-5" >
											</select>
										</div>
									</form>
									<div class="col-sm-4">
										<button class="btn btn-white" onclick="showSchoolScoreInfo()">
											查询
										</button>
									</div>

								</div>



								<div class="row">
                                    <div class="col-xs-12">
                                        <div class="table-responsive">
                                            <table id="table4" class="table table-striped table-bordered table-hover">
                                                <thead>
                                                    <tr>
                                                        <th>学院</th>
                                                        <th>学号</th>
                                                        <th class="hidden-480">姓名</th>
                                                        <th>项目名称</th>
                                                        <th>项目类别</th>
                                                        <th>组别</th>
                                                        <th>个人成绩</th>
                                                    </tr>
                                                </thead>

                                                <tbody>

                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
							</div>
						</div>
						<!--项目选择 End-->
						<div class="row">
							<div class="col-sm-10">
								<div class="tabbable">
									
									<!--选项卡 Begin-->
									<ul class="nav nav-tabs" id="myTab">
										
										<li class="active">
											<a data-toggle="tab" href="#home" onclick="showProjectInfo(1)">
												小组赛
											</a>
										</li>
										
										<li>
											<a data-toggle="tab" href="#profile" onclick="showProjectInfo(2)">
												初赛
											</a>
										</li>
						
										<li>
											<a data-toggle="tab" href="#endpro" onclick="showProjectInfo(3)">
												决赛
											</a>
										</li>
									</ul>
									<!--选项卡 End-->
									
									<!--选项内容 Begin-->
									<div class="tab-content">
										
										<!--小组赛 Begin-->
										<div id="home" class="tab-pane in active">
											<div class="row">
													<div class="col-xs-12">

														<button class="btn btn-info dialogalert"  type="button" style="float: right;" data-toggle="modal" data-target="#myModal">
															录入成绩
															<i class="icon-print  align-top bigger-125 icon-on-right"></i>
														</button>

														<div class="table-responsive">
															<table id="table1" class="table table-striped table-bordered table-hover">
																<thead>
																	<tr>
                                                                        <th>院系</th>
                                                                        <th>学号</th>
                                                                        <th class="hidden-480">姓名</th>
                                                                        <th>项目名称</th>
                                                                        <th>项目类别</th>
                                                                        <th>组别</th>
                                                                        <th>成绩</th>
																	</tr>
																</thead>
																
																<tbody>

																</tbody>
															</table>
														</div>
													</div>
												</div>
										</div>
										<!--小组赛 End-->
							
										<!--初赛 Begin-->
										<div id="profile" class="tab-pane">
											<div class="row">
													<div class="col-xs-12">
														<div class="table-responsive">
															<table id="table2" class="table table-striped table-bordered table-hover">
																<thead>
																	<tr>
                                                                        <th>院系</th>
                                                                        <th>学号</th>
                                                                        <th class="hidden-480">姓名</th>
                                                                        <th>项目名称</th>
                                                                        <th>项目类别</th>
                                                                        <th>组别</th>
                                                                        <th>成绩</th>
																	</tr>
																</thead>
																
																<tbody>
																</tbody>
															</table>
														</div>
													</div>
												</div>
										</div>
										<!--初赛 End-->
										
										<!--决赛 Begin-->
										<div id="endpro" class="tab-pane">
											<div class="row">
													<div class="col-xs-12">
														<div class="table-responsive">
															<table id="table3" class="table table-striped table-bordered table-hover">
																<thead>
																	<tr>
                                                                        <th>院系</th>
                                                                        <th>学号</th>
                                                                        <th class="hidden-480">姓名</th>
                                                                        <th>项目名称</th>
                                                                        <th>项目类别</th>
                                                                        <th>组别</th>
                                                                        <th>成绩</th>
																	</tr>
																</thead>
																
																<tbody>
																</tbody>
															</table>
														</div>
													</div>
												</div>
										</div>
										<!--决赛 End-->
										
									</div>
									<!--选项内容 End-->
								</div>
							</div>
							<!-- /span -->
						</div>
					</div>
					<!--内容 End-->
				</div>
				<!--右侧内容 End-->
		</div>

			<!--弹框（Modal） -->
			<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
				<div class="modal-dialog">
					<div class="modal-content">
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
							<h4 class="modal-title" id="myModalLabel">成绩录入</h4>
						</div>

						<!-- 成绩录入弹框BEGINS -->

						<form class="form-horizontal" role="form" id="addscores">
							<div class="space-4"></div>

							<div class="form-group">
								<label class="col-sm-5 control-label no-padding-right" for="form-field-1">学号:</label>

								<div class="col-sm-6">
									<input type="text" name="sysUserSid" placeholder="" class="col-xs-10 col-sm-5" />
								</div>
							</div>

							<div class="space-4"></div>

							<div class="form-group">

								<label class="col-sm-5 control-label no-padding-right" for="form-field-2">项目名称:</label>

								<div class="col-sm-6">
									<select id="projectname" placeholder="" class="col-xs-10 col-sm-5" name="sysProjectId">
									</select>
								</div>
							</div>

							<div class="space-4"></div>

							<div class="form-group">
								<label class="col-sm-5 control-label no-padding-right" for="form-field-3">组别:</label>

								<div class="col-sm-6">
									<select  placeholder="" name ="teamType"class="col-xs-10 col-sm-5" name="teamType">
										<option value="2" selected>男子组</option>
										<option value="1">女子组</option>
									</select>
								</div>
							</div>
							<div class="form-group">
								<label class="col-sm-5 control-label no-padding-right" for="form-field-4">项目类别:</label>

								<div class="col-sm-6">
									<select  placeholder="" class="col-xs-10 col-sm-5" name="sportType">
										<option value="1" selected>田赛</option>
										<option value="2">径赛</option>
									</select>
								</div>
							</div>
							<div class="form-group">
								<label class="col-sm-5 control-label no-padding-right" for="form-field-6">个人成绩:</label>

								<div class="col-sm-6">
									<input type="text" id="score" name="achievement" placeholder="" class="col-xs-10 col-sm-5" />
								</div>
							</div>
							<div class="form-group">
								<label class="col-sm-5 control-label no-padding-right" for="form-field-7">比赛类型:</label>

								<div class="col-sm-6">
									<select  placeholder="" name ="matchType" class="col-xs-10 col-sm-5">
										<option value="1" selected>小组赛</option>
										<option value="2">初赛</option>
										<option value="3">决赛</option>

									</select>
								</div>
							</div>

							<div class="space-4"></div>
							<div class="modal-footer">
								<button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
								<button type="button" class="btn btn-primary" onclick="addScore()">提交</button>
							</div>

						</form>


					</div><!-- /.modal-content -->
				</div><!-- /.modal -->
			</div>

		</div>


		<script src="assets/js/jquery-2.0.3.min.js"></script>
		<script type="text/javascript">
            window.jQuery || document.write("<script src='assets/js/jquery-2.0.3.min.js'>" + "<" + "script>");
		</script>
		<script type="text/javascript">
            if("ontouchend" in document) document.write("<script src='assets/js/jquery.mobile.custom.min.js'>" + "<" + "script>");
		</script>

		<script src="assets/js/bootstrap.min.js"></script>
		<script src="assets/js/typeahead-bs2.min.js"></script>
		<script src="assets/js/jquery-ui-1.10.3.custom.min.js"></script>
		<script src="assets/js/jquery.ui.touch-punch.min.js"></script>
		<script src="assets/js/jquery.slimscroll.min.js"></script>
		<script src="assets/js/jquery.easy-pie-chart.min.js"></script>
		<script src="assets/js/jquery.sparkline.min.js"></script>
		<script src="assets/js/flot/jquery.flot.min.js"></script>
		<script src="assets/js/flot/jquery.flot.pie.min.js"></script>
		<script src="assets/js/flot/jquery.flot.resize.min.js"></script>
		<script src="assets/js/ace-elements.min.js"></script>
		<script src="assets/js/ace.min.js"></script>
		<script src="assets/js/myjs/index.js"></script>
		<script type="text/javascript">
            window.onload = showProjects();
            function showProjects(){
                $.ajax({
                    type: "POST",//方法类型
                    contentType: "application/json",
                    dataType: "json",//预期服务器返回的数据类型
                    url: "/scoreAddController/sysProject",//url
                    async: false,
                    success: function (result) {
                        // console.log(result);//打印服务端返回的数据(调试用)
                        /* <option value="0">田径</option>
                         <option value="0">羽毛球</option>*/
                        if (result.httpStatus == 200) {
                            var content = "";
                            var dataArr = result.data;
                            $.each(dataArr, function(index, item){
                                console.log(item);
                                content += '<option value=' + item.id + '>' + item.name + '</option>';
                            });
                            $("#projectname").empty();
                            $("#projectname").html(content);
                        };
                    },
                    error: function () {
                        alert("异常！");
                    }
                })
            }
		</script>
		<script type="text/javascript">
            /*成绩录入的函数有点问题
            * 需要获取下拉框id然后传过去以下字段，页面的name已对应好
            * sysUserSid	学号
            * sysProjectId	项目id
                teamType	组别 1、女子组 2、男子组
                sportType	项目类别 1、田赛 2、径赛
                achievement	个人成绩
                matchType
            *
            * */
            function addScore() {
                // alert($("#addscores").serialize());
                $.ajax({
                    //几个参数需要注意一下
                    type: "POST",//方法类型
                    // contentType: "application/json",
                    dataType: "json",//预期服务器返回的数据类型
                    url: "/scoreAddController/addScore",//url
                    data:$("#addscores").serialize(),
                    async: false,
                    success: function (result) {
                        if (result) {
                            alert("录入成绩成功！");
                            window.location.href = "/static/addscore.html";
                        };
                    },
                    error: function () {
                        alert("异常！");
                        window.location.href = "/static/addscore.html";
                    }
                });
            }


		</script>
		<script type="text/javascript">
            window.onload = showProjects();
            function showProjects(){
                $.ajax({
                    type: "POST",//方法类型
                    contentType: "application/json",
                    dataType: "json",//预期服务器返回的数据类型
                    url: "/scoreAddController/sysProject",//url
                    async: false,
                    success: function (result) {
                        // console.log(result);//打印服务端返回的数据(调试用)
                        /* <option value="0">田径</option>
                         <option value="0">羽毛球</option>*/
                        if (result.httpStatus == 200) {
                            var content = "";
                            var dataArr = result.data;
                            $.each(dataArr, function(index, item){
                                console.log(item);
                                content += '<option value=' + item.id + '>' + item.name + '</option>';
                            });
                            $("#projectid").empty();
                            $("#projectid").html(content);
                        };
                    },
                    error: function () {
                        alert("异常！");
                    }
                })
            }
		</script>
		<script type="text/javascript">
            function showSchoolScoreInfo(){
                var sid;//传过去projectid
                sid = $("#projectid").val();
                // alert(sid);
                $.ajax({
                    type: "POST",//方法类型
                    // contentType: "application/json",
                    dataType: "json",//预期服务器返回的数据类型
                    data: {id: sid},
                    url: "/scoreAddController/schoolScoreInfo",//url
                    async: false,
                    success: function (result) {
                        if (result.httpStatus == 200) {
                            var content = "";
                            var dataArr = result.data;
                            $.each(dataArr, function(index, item){

                                console.log(item);
                                content += "<tr>" +
                                    "<td class='center'><a>"+item.sysCollegeName+"</a></td>" +
                                    "<td>" + item.sid+"</td>" +
                                    "<td class='hidden-480'>"+item.name+ "</td>" +
                                    "<td>" + item.sysProjectName + "</td>" +
                                    "<td>" + item.sportType + "</td>" +
                                    "<td>" + item.teamType + "</td>" +
                                    "<td class='hidden-480'>"+item.achievement+ "</td>" +
                                    "</tr>";
                            });
                            $("#table4").empty();
                            $("#table4").html(content);
                        };
                    },
                    error: function () {
                        alert("异常！");
                    }
                })
            }
		</script>
		<script type="text/javascript">
            function showProjectInfo(matchType){
                // alert("matchType="+matchType);
                matchType = matchType || 1;
                $.ajax({
                    type: "POST",//方法类型
                    dataType: "json",//预期服务器返回的数据类型
                    data: {matchType: matchType},
                    url: "/scoreAddController/sysProjectInfo",//url
                    async: false,
                    success: function (result) {
                        if (result.httpStatus == 200) {
                            var content = "";
                            var dataArr = result.data.list;
                            $.each(dataArr, function(index, item){
                                console.log(item);
                                content += "<tr>" +
                                    "<td class='center'><a >"+item.sysCollegeName+"</a></td>" +
                                    "<td>" + item.sid+"</td>" +
                                    "<td class='hidden-480'>"+item.name+ "</td>" +
                                    "<td class='hidden-480'>"+item.sysProjectName+ "</td>" +
                                    "<td>" + item.sportType + "</td>" +
                                    "<td>" + item.teamType + "</td>" +
                                    "<td class='hidden-480'>"+item.achievement+ "</td>" +
                                    "</tr>";
                            });
                            $("#table" + matchType).empty();
                            $("#table" + matchType).html(content);
                        };
                    },
                    error: function () {
                        alert("异常！");
                    }
                })
            }

		</script>

	</body>

</html>